<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Films</title>
        <link rel="stylesheet" type="text/css" href="files/template_results.css" />
        <link rel="shortcut icon" type="image/png" href="files/icon.png" />
    </head>
    <body>
        <header>
            <img id="search-image" src="files/search_icon.png">
            <input id="search-input" type="text" name="" placeholder="What would you like to watch?">
         </header>
         <main>
            {{ range $idx, $film := .Films}}
                <a class="film_item" HREF="watch?v={{ $film.Id }}">
                    <img src="media/{{ $film.PosterFile.Path }}">
					<div>
						<p><b>{{$film.Title}}</b></p>
						<p>{{$film.Tagline}}</p>
						<p>{{$film.ReleaseDate}}</p>
						<p>{{$film.VoteAverage}} ({{$film.VoteCount}})</p>
					</div>
                </a>
            {{ end }}
        </main>
    </body>
    <script type="text/javascript">
        const search_input = document.getElementById("search-input");
        const search_image = document.getElementById("search-image");

        search_input.addEventListener('keyup', InputHandler);
        search_image.addEventListener('click', ImageHandler);

        function InputHandler (key_event) {
            if (event.keyCode === 13) {
                window.location.replace("?q="+search_input.value);
            }
        }
        function ImageHandler () {
            window.location.replace("?q="+search_input.value);
        }
    </script>
</html>
